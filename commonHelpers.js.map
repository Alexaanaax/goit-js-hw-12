{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { refs, query, showLoader, currentPage, pageLimit } from '../main';\n\nconst myAxios = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n});\n\nexport async function getImages() {\n  const params = {\n    key: '43034090-772f27db84397385e52753f5e',\n    q: query,\n    per_page: pageLimit,\n    page: currentPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  };\n\n  showLoader();\n\n  const response = await myAxios.get('', { params });\n  return response.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs, lightbox, displayMessage } from '../main';\n\nexport function render(data) {\n  if (data.hits.length === 0) {\n    displayMessage(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n  } else {\n    const images = data.hits;\n\n    const markup = images\n      .map(\n        image =>\n          `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img loading=\"lazy\" class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n                </a>\n                <div class=\"stats\">\n                    <p class=\"text\">Likes<br/>${image.likes}</p>\n                    <p class=\"text\">Views<br/>${image.views}</p>\n                    <p class=\"text\">Comments<br/>${image.comments}</p>\n                    <p class=\"text\">Downloads<br/>${image.downloads}</p>\n                </div>\n            </li>`\n      )\n      .join('');\n\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  }\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImages } from './js/pixabay-api.js';\nimport { render } from './js/render-functions.js';\n\nexport const lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport const refs = {\n  form: document.querySelector('.form'),\n  searchInput: document.getElementById('searchInput'),\n  searchBtn: document.querySelector('button'),\n  loadBtn: document.querySelector('.load-more-button'),\n  loader: document.querySelector('.loader'),\n  gallery: document.querySelector('.gallery'),\n};\n\nexport let query = '';\nexport let currentPage = 1;\nexport let pageLimit = 15;\n\nhideLoader();\nhideLoadBtn();\n\nrefs.form.addEventListener('submit', async event => {\n  event.preventDefault();\n  currentPage = 1;\n  refs.gallery.innerHTML = '';\n  query = refs.searchInput.value.trim();\n  if (query !== '') {\n    try {\n      const data = await getImages(query, currentPage);\n      const maxPage = Math.ceil(data.totalHits / pageLimit);\n      render(data);\n      hideLoader();\n      if (currentPage >= maxPage) {\n        hideLoadBtn();\n      } else {\n        showLoadBtn();\n      }\n    } catch (error) {\n      console.log(error);\n      displayMessage('An error occurred while fetching data.');\n      hideLoadBtn();\n    }\n  } else {\n    displayMessage('Empty field!');\n    hideLoadBtn();\n  }\n  refs.form.reset();\n});\nrefs.loadBtn.addEventListener('click', async onLoadMoreClick => {\n  currentPage += 1;\n  try {\n    const data = await getImages(query, currentPage);\n    hideLoader();\n    render(data);\n    showLoadBtn();\n    const item = document.querySelector('.gallery-item');\n    const rect = item.getBoundingClientRect();\n    window.scrollBy({\n      top: rect.height * 2,\n      behavior: 'smooth',\n    });\n    const maxPage = Math.ceil(data.totalHits / pageLimit);\n    if (currentPage >= maxPage) {\n      hideLoadBtn();\n    }\n  } catch (error) {\n    console.log(error);\n    displayMessage('An error occurred while fetching data.');\n    hideLoadBtn();\n  }\n});\n\nexport function displayMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n    backgroundColor: 'red',\n  });\n}\n\nexport function hideLoader() {\n  refs.loader.style.display = 'none';\n}\n\nexport function showLoader() {\n  refs.loader.style.display = 'block';\n}\n\nfunction hideLoadBtn() {\n  refs.loadBtn.style.display = 'none';\n}\n\nfunction showLoadBtn() {\n  refs.loadBtn.style.display = 'block';\n}"],"names":["myAxios","axios","getImages","params","query","pageLimit","currentPage","showLoader","render","data","displayMessage","markup","image","refs","lightbox","SimpleLightbox","hideLoader","hideLoadBtn","event","maxPage","showLoadBtn","error","onLoadMoreClick","rect","message","iziToast"],"mappings":"owBAGA,MAAMA,EAAUC,EAAM,OAAO,CAC3B,QAAS,0BACX,CAAC,EAEM,eAAeC,GAAY,CAChC,MAAMC,EAAS,CACb,IAAK,qCACL,EAAGC,EACH,SAAUC,EACV,KAAMC,EACN,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,EAEE,OAAAC,KAEiB,MAAMP,EAAQ,IAAI,GAAI,CAAE,OAAAG,CAAM,CAAE,GACjC,IAClB,CCfO,SAASK,EAAOC,EAAM,CAC3B,GAAIA,EAAK,KAAK,SAAW,EACvBC,EACE,0EACN,MACS,CAGL,MAAMC,EAFSF,EAAK,KAGjB,IACCG,GACE;AAAA,gDACsCA,EAAM,aAAa;AAAA,iEACFA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,gDAGvDA,EAAM,KAAK;AAAA,gDACXA,EAAM,KAAK;AAAA,mDACRA,EAAM,QAAQ;AAAA,oDACbA,EAAM,SAAS;AAAA;AAAA,kBAG5D,EACA,KAAK,EAAE,EAEVC,EAAK,QAAQ,mBAAmB,YAAaF,CAAM,EACnDG,EAAS,QAAO,CACjB,CACH,CC1BO,MAAMA,EAAW,IAAIC,EAAe,gBAAiB,CAC1D,aAAc,MACd,aAAc,GAChB,CAAC,EAEYF,EAAO,CAClB,KAAM,SAAS,cAAc,OAAO,EACpC,YAAa,SAAS,eAAe,aAAa,EAClD,UAAW,SAAS,cAAc,QAAQ,EAC1C,QAAS,SAAS,cAAc,mBAAmB,EACnD,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,UAAU,CAC5C,EAEO,IAAIT,EAAQ,GACRE,EAAc,EACdD,EAAY,GAEvBW,IACAC,IAEAJ,EAAK,KAAK,iBAAiB,SAAU,MAAMK,GAAS,CAKlD,GAJAA,EAAM,eAAc,EACpBZ,EAAc,EACdO,EAAK,QAAQ,UAAY,GACzBT,EAAQS,EAAK,YAAY,MAAM,KAAI,EAC/BT,IAAU,GACZ,GAAI,CACF,MAAMK,EAAO,MAAMP,EAAUE,EAAOE,CAAW,EACzCa,EAAU,KAAK,KAAKV,EAAK,UAAYJ,CAAS,EACpDG,EAAOC,CAAI,EACXO,IACIV,GAAea,EACjBF,IAEAG,GAEH,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBX,EAAe,wCAAwC,EACvDO,GACD,MAEDP,EAAe,cAAc,EAC7BO,IAEFJ,EAAK,KAAK,OACZ,CAAC,EACDA,EAAK,QAAQ,iBAAiB,QAAS,MAAMS,GAAmB,CAC9DhB,GAAe,EACf,GAAI,CACF,MAAMG,EAAO,MAAMP,EAAUE,EAAOE,CAAW,EAC/CU,IACAR,EAAOC,CAAI,EACXW,IAEA,MAAMG,EADO,SAAS,cAAc,eAAe,EACjC,wBAClB,OAAO,SAAS,CACd,IAAKA,EAAK,OAAS,EACnB,SAAU,QAChB,CAAK,EACD,MAAMJ,EAAU,KAAK,KAAKV,EAAK,UAAYJ,CAAS,EAChDC,GAAea,GACjBF,GAEH,OAAQI,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBX,EAAe,wCAAwC,EACvDO,GACD,CACH,CAAC,EAEM,SAASP,EAAec,EAAS,CACtCC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,WACV,gBAAiB,KACrB,CAAG,CACH,CAEO,SAASR,GAAa,CAC3BH,EAAK,OAAO,MAAM,QAAU,MAC9B,CAEO,SAASN,GAAa,CAC3BM,EAAK,OAAO,MAAM,QAAU,OAC9B,CAEA,SAASI,GAAc,CACrBJ,EAAK,QAAQ,MAAM,QAAU,MAC/B,CAEA,SAASO,GAAc,CACrBP,EAAK,QAAQ,MAAM,QAAU,OAC/B"}